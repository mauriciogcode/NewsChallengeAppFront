<p-dialog 
  [(visible)]="visible" 
  [style]="{width: '50vw'}" 
  [modal]="true" 
  [draggable]="false" 
  [resizable]="false"
  header="Crear nueva noticia">
  
  <form [formGroup]="newsForm">
    <div class="field">
      <label for="title">Título *</label>
      <input id="title" type="text" pInputText formControlName="title" class="w-full" 
        [ngClass]="{'ng-invalid ng-dirty': newsForm.get('title')?.invalid && newsForm.get('title')?.touched}">
      <small class="p-error" *ngIf="newsForm.get('title')?.invalid && newsForm.get('title')?.touched">
        El título es requerido.
      </small>
    </div>
    
    <div class="field">
      <label for="author">Autor *</label>
      <input id="author" type="text" pInputText formControlName="author" class="w-full"
        [ngClass]="{'ng-invalid ng-dirty': newsForm.get('author')?.invalid && newsForm.get('author')?.touched}">
      <small class="p-error" *ngIf="newsForm.get('author')?.invalid && newsForm.get('author')?.touched">
        El autor es requerido.
      </small>
    </div>
    
    <div class="field">
      <label for="imageUrl">URL de Imagen *</label>
      <input id="imageUrl" type="text" pInputText formControlName="imageUrl" class="w-full"
        [ngClass]="{'ng-invalid ng-dirty': newsForm.get('imageUrl')?.invalid && newsForm.get('imageUrl')?.touched}">
      <small class="p-error" *ngIf="newsForm.get('imageUrl')?.invalid && newsForm.get('imageUrl')?.touched">
        La URL de imagen es requerida.
      </small>
    </div>
    
    <div class="field">
      <label for="subtitle">Subtítulo</label>
      <input id="subtitle" type="text" pInputText formControlName="subtitle" class="w-full">
    </div>
    
    <div class="field">
      <label for="body">Contenido *</label>
      <textarea id="body" pInputText formControlName="body" rows="5" class="w-full"
        [ngClass]="{'ng-invalid ng-dirty': newsForm.get('body')?.invalid && newsForm.get('body')?.touched}"></textarea>
      <small class="p-error" *ngIf="newsForm.get('body')?.invalid && newsForm.get('body')?.touched">
        El contenido es requerido.
      </small>
    </div>
  </form>
  
  <ng-template pTemplate="footer">
    <button pButton label="Cancelar" icon="pi pi-times" (click)="hide()" class="p-button-text"></button>
    <button pButton label="Guardar" icon="pi pi-check" (click)="onSave()" class="p-button-primary"></button>
  </ng-template>
</p-dialog>

<app-spinner [visible]="spinnerService.loading" [message]="spinnerService.message"></app-spinner>